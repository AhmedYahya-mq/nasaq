<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>اختبار Zoom Web SDK 3.1.0</title>

<!-- Zoom Web SDK dependencies -->
<script src="https://source.zoom.us/3.1.0/lib/vendor/react.min.js"></script>
<script src="https://source.zoom.us/3.1.0/lib/vendor/react-dom.min.js"></script>
<script src="https://source.zoom.us/3.1.0/lib/vendor/redux.min.js"></script>
<script src="https://source.zoom.us/3.1.0/lib/vendor/redux-thunk.min.js"></script>
<script src="https://source.zoom.us/3.1.0/lib/vendor/lodash.min.js"></script>

<!-- Zoom Meeting SDK -->
<script src="https://source.zoom.us/3.1.0/zoom-meeting-3.1.0.min.js"></script>

<style>
body { font-family: Arial; padding: 20px; }
button { padding: 10px 20px; margin: 5px; cursor: pointer; }
input { padding: 5px; margin: 5px; }
#zmmtg-root { width: 100%; height: 600px; margin-top: 20px; }
</style>
</head>
<body>

<h1>اختبار اجتماع Zoom</h1>

<div>
    <label>اسم المستخدم: </label>
    <input type="text" id="username" value="Ahmed">
</div>
<div>
    <label>Meeting ID: </label>
    <input type="text" id="meetingNumber" value="MEETING_ID_HERE">
</div>
<div>
    <label>Password: </label>
    <input type="text" id="meetingPassword" value="MEETING_PASSWORD_HERE">
</div>

<button id="joinBtn">انضم للاجتماع</button>

<!-- عنصر Zoom SDK -->
<div id="zmmtg-root"></div>

<script>
  // إعداد مكتبة Zoom Web SDK
  ZoomMtg.setZoomJSLib('https://source.zoom.us/3.1.0/lib', '/av');
  ZoomMtg.preLoadWasm();
  ZoomMtg.prepareWebSDK();

  document.getElementById('joinBtn').addEventListener('click', function() {
    const meetConfig = {
        sdkKey: "xpKfCGfWpyIt71YUxejVu0bTnbZ61b2f", // ضع مفتاح SDK الخاص بك هنا
        meetingNumber: document.getElementById('meetingNumber').value,
        userName: document.getElementById('username').value,
        passWord: document.getElementById('meetingPassword').value,
        leaveUrl: "https://yourwebsite.com/meeting-end",
        role: 0 // 0 = attendee, 1 = host
    };

    // Signature ثابت للتجربة (غير آمن للإنتاج)
    const signature = "YOUR_TEST_SIGNATURE";

    ZoomMtg.init({
        leaveUrl: meetConfig.leaveUrl,
        isSupportAV: true,
        success: function() {
            ZoomMtg.join({
                signature: signature,
                sdkKey: meetConfig.sdkKey,
                meetingNumber: meetConfig.meetingNumber,
                userName: meetConfig.userName,
                passWord: meetConfig.passWord,
                success: function() {
                    console.log("تم الانضمام للاجتماع");
                    console.log("وقت الدخول:", new Date().toLocaleTimeString());
                },
                error: function(err) { console.error(err); }
            });
        },
        error: function(err) { console.error(err); }
    });
  });

  // الاستماع لخروج المستخدم (تجريبي)
  ZoomMtg.inMeetingServiceListener('onUserLeave', function(data) {
      console.log("المستخدم غادر الاجتماع:", data.userName, "وقت:", new Date().toLocaleTimeString());
  });
</script>

</body>
</html>
